{% extends "enduser/base.html" %}

{% block title %}Pixify | followings{% endblock %}

{% block content %}

{% load static %}
{% csrf_token %}
<div class="px-3 py-3 mt-3" style="height: 100%;background-color: #1f0447e3; box-shadow: 0 4px 8px rgba(151, 95, 236, 0.5);font-family: serif;border-radius: 7px;" >
    <div class="card mb-sm-3 mb-md-0 contacts_card" style="background-color: #1f0447e3; ">
        <div class="p-2 card-header">
            <div class="input-group px-5">
                <input type="text" placeholder="Search..." name="" class="form-control search-inp" >
                <div class="input-group-prepend">
                    <span class="input-group-text search_btn"><i class="fas fa-search"></i></span>
                </div>
            </div>
        </div>
    </div>
    <div class="fcontainer" style="height:90%; scrollbar-width: none; overflow-y: scroll;">
        {% if followings %}
            {% for following in followings %}
            <div class="user-card" id="follower-item">
                <div style="align-items: center;display: flex;">
                    <img src="{% static following.profile_pic %}" alt="User">
                    <div class="user-info"><h4 id="userName">{{ following.fullname }}</h4></div>
                </div>
                <!-- Button Logic: Check if current user and skip rendering button -->
                {% if following.id != current_user %}
                    {% for button in follow_button_types %}
                        {% if button.id == following.id %}
                            {% if button.button_type == 'follow-back' %}
                                <button class="follow-back-btn">Follow Back</button>
                            {% elif button.button_type == 'unfollow' %}
                                <button class="unfollow-btn">Unfollow</button>
                            {% else %}
                                <button class="follow-btn">Follow</button>
                            {% endif %}
                        {% endif %}
                    {% endfor %}
                {% endif %}
            </div>
            {% endfor %}
        {% else %}
            <p>No followings found</p>
        {% endif %}
    </div>        
</div>    
<style>
    .user-item{

    }
    .follow-btn {
        border-radius: 5px;
        background-color: #0d6efd;
        color: white;
        padding: 5px 20px;
        border: none;
        cursor: pointer;
    }
    
    .follow-back-btn {
        border-radius: 5px;
        background-color: #0d6efd;
        color: white;
        padding: 5px 20px;
        border: none;
        cursor: pointer;
    }
    
    .unfollow-btn {
        border-radius: 5px;
        background-color: #0d6efd;
        color: white;
        padding: 5px 20px;
        border: none;
        cursor: pointer;
    }
    
    button:hover {
        opacity: 0.8;
    }
    #follower-item{
        margin:20px;
        justify-content: space-between;
        display: flex;
        align-items: center;
    }
</style>
{% endblock %}